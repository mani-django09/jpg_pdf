{% extends 'base.html' %}
{% load i18n %}

{% block title %}{% trans "Free JPG to PDF Converter - Convert Images Online" %}{% endblock %}
{% block meta_description %}{% trans "Turn your JPG and PNG images into PDF files. Free tool, no signup needed. Works on phone and computer." %}{% endblock %}

{% block content %}
<style>
    :root {
        --primary-red: #ff4757;
        --primary-red-dark: #ee3744;
        --text-dark: #2c3e50;
        --text-gray: #7f8c8d;
        --bg-light: #fff5f5;
        --border-light: #ffe0e0;
        --white: #ffffff;
        --shadow: 0 2px 8px rgba(0,0,0,0.06);
        --shadow-lg: 0 4px 20px rgba(0,0,0,0.1);
    }

    .hero-compact {
        background: transparent;
        padding: 1rem;
        text-align: center;
        border-bottom: 1px solid #e9ecef;
    }

    .hero-compact h1 {
        font-size: clamp(1.3rem, 3.5vw, 1.75rem);
        font-weight: 700;
        color: var(--text-dark);
        margin-bottom: 0.25rem;
    }

    .hero-compact p {
        font-size: clamp(0.85rem, 1.8vw, 0.95rem);
        color: var(--text-gray);
        max-width: 600px;
        margin: 0 auto;
    }

    .upload-section {
        max-width: 700px;
        margin: 2rem auto;
        padding: 0 1rem;
    }

    .upload-box {
        background: white;
        border: 2px dashed var(--border-light);
        border-radius: 12px;
        padding: 2.5rem 1.5rem;
        text-align: center;
        cursor: pointer;
        transition: all 0.3s;
        position: relative;
    }

    .upload-box:hover {
        border-color: var(--primary-red);
        background: #fffafa;
        transform: translateY(-2px);
    }

    .upload-box.dragover {
        border-color: var(--primary-red);
        background: #fff5f5;
        transform: scale(1.02);
    }

    .upload-icon-circle {
        width: 60px;
        height: 60px;
        background: var(--bg-light);
        border-radius: 50%;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 1rem;
    }

    .upload-icon-circle i {
        font-size: 1.5rem;
        color: var(--primary-red);
    }

    .upload-title {
        font-size: 1.25rem;
        font-weight: 600;
        color: var(--text-dark);
        margin-bottom: 0.5rem;
    }

    .upload-subtitle {
        color: var(--text-gray);
        font-size: 0.9rem;
        margin-bottom: 1.25rem;
    }

    .select-files-btn {
        background: var(--primary-red);
        color: white;
        border: none;
        padding: 0.875rem 2rem;
        border-radius: 8px;
        font-weight: 600;
        font-size: 0.95rem;
        cursor: pointer;
        transition: all 0.3s;
    }

    .select-files-btn:hover {
        background: var(--primary-red-dark);
        transform: translateY(-1px);
        box-shadow: var(--shadow-lg);
    }

    .file-input {
        position: absolute;
        inset: 0;
        opacity: 0;
        cursor: pointer;
    }

    .trust-bar {
        background: #e8f5e9;
        border: 1px solid #c8e6c9;
        border-radius: 8px;
        padding: 1rem 1.25rem;
        margin-top: 1.5rem;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.75rem;
    }

    .trust-bar i {
        color: #4caf50;
        font-size: 1.25rem;
    }

    .trust-bar span {
        font-size: 0.9rem;
        color: #2e7d32;
    }

    .files-state {
        background: white;
        border-radius: 12px;
        box-shadow: var(--shadow);
        display: none;
        margin-top: 2rem;
    }

    .files-state.show {
        display: block;
    }

    .files-header {
        padding: 1rem 1.5rem;
        border-bottom: 1px solid #e9ecef;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .files-count {
        font-weight: 600;
        color: var(--text-dark);
        font-size: 0.95rem;
    }

    .files-actions {
        display: flex;
        gap: 0.5rem;
    }

    .btn-sm {
        padding: 0.5rem 1rem;
        border-radius: 6px;
        font-weight: 600;
        font-size: 0.85rem;
        cursor: pointer;
        transition: all 0.3s;
        border: none;
    }

    .btn-add {
        background: var(--primary-red);
        color: white;
    }

    .btn-clear {
        background: #e9ecef;
        color: var(--text-gray);
    }

    .previews {
        padding: 1rem 1.5rem;
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
        gap: 0.75rem;
        max-height: 300px;
        overflow-y: auto;
    }

    .preview {
        position: relative;
        aspect-ratio: 1;
        background: #fafbfc;
        border-radius: 8px;
        overflow: hidden;
        border: 1px solid #e9ecef;
    }

    .preview img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .remove-btn {
        position: absolute;
        top: 0.25rem;
        right: 0.25rem;
        background: rgba(255, 71, 87, 0.95);
        color: white;
        border: none;
        width: 24px;
        height: 24px;
        border-radius: 50%;
        cursor: pointer;
        font-size: 0.75rem;
        display: flex;
        align-items: center;
        justify-content: center;
        opacity: 0;
        transition: opacity 0.3s;
    }

    .preview:hover .remove-btn {
        opacity: 1;
    }

    .files-footer {
        padding: 1rem 1.5rem;
        border-top: 1px solid #e9ecef;
        text-align: center;
    }

    .convert-btn {
        background: var(--primary-red);
        color: white;
        border: none;
        padding: 0.875rem 2rem;
        border-radius: 6px;
        font-weight: 600;
        font-size: 0.95rem;
        cursor: pointer;
        transition: all 0.3s;
    }

    .convert-btn:hover {
        background: var(--primary-red-dark);
    }

    .convert-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
    }

    .content-section {
        background: white;
        border-radius: 12px;
        padding: 2rem clamp(1rem, 3vw, 2rem);
        margin: 2rem 0;
        box-shadow: var(--shadow);
    }

    .content-section h2 {
        font-size: clamp(1.5rem, 3vw, 1.875rem);
        margin-bottom: 1rem;
        color: var(--text-dark);
        font-weight: 700;
    }

    .content-section h3 {
        font-size: clamp(1.1rem, 2.5vw, 1.35rem);
        margin: 1.5rem 0 0.75rem;
        color: var(--text-dark);
        font-weight: 600;
    }

    .content-section p {
        color: var(--text-gray);
        margin-bottom: 1rem;
        line-height: 1.7;
        font-size: clamp(0.9rem, 2vw, 1rem);
    }

    .content-section ul {
        margin: 1rem 0;
        padding-left: 1.5rem;
    }

    .content-section li {
        color: var(--text-gray);
        margin-bottom: 0.75rem;
        line-height: 1.6;
    }

    .features-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 1.5rem;
        margin: 2rem 0;
    }

    .feature-item {
        text-align: center;
        padding: 1rem;
    }

    .feature-icon {
        width: 56px;
        height: 56px;
        background: var(--bg-light);
        border-radius: 12px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 1rem;
    }

    .feature-icon i {
        font-size: 1.5rem;
        color: var(--primary-red);
    }

    .feature-item h3 {
        font-size: 1rem;
        font-weight: 600;
        margin-bottom: 0.5rem;
        color: var(--text-dark);
    }

    .feature-item p {
        font-size: 0.85rem;
        color: var(--text-gray);
        line-height: 1.5;
    }

    .steps-list {
        margin: 2rem 0;
    }

    .step-item {
        display: flex;
        gap: 1rem;
        margin-bottom: 1.5rem;
        padding: 1rem;
        background: #fafbfc;
        border-radius: 8px;
    }

    .step-number {
        width: 32px;
        height: 32px;
        background: var(--primary-red);
        color: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 700;
        font-size: 0.9rem;
        flex-shrink: 0;
    }

    .step-content h3 {
        font-size: 1rem;
        font-weight: 600;
        color: var(--text-dark);
        margin: 0 0 0.25rem 0;
    }

    .step-content p {
        font-size: 0.9rem;
        color: var(--text-gray);
        margin: 0;
        line-height: 1.5;
    }

    .faq-section {
        margin: 2rem 0;
    }

    .faq-item {
        border-bottom: 1px solid #e9ecef;
        padding: 1.5rem 0;
    }

    .faq-item:last-child {
        border-bottom: none;
    }

    .faq-question {
        width: 100%;
        background: none;
        border: none;
        padding: 0;
        text-align: left;
        font-size: 1.15rem;
        font-weight: 700;
        color: var(--text-dark);
        cursor: pointer;
        display: flex;
        justify-content: space-between;
        align-items: center;
        transition: color 0.3s;
        line-height: 1.5;
    }

    .faq-question:hover {
        color: var(--primary-red);
    }

    .faq-question::after {
        content: '+';
        font-size: 1.8rem;
        color: var(--text-gray);
        transition: transform 0.3s;
        margin-left: 1rem;
    }

    .faq-question.active::after {
        transform: rotate(45deg);
    }

    .faq-answer {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s;
        color: var(--text-gray);
        font-size: 1rem;
        line-height: 1.7;
    }

    .faq-answer.active {
        max-height: 500px;
        padding-top: 1rem;
    }

    @media (max-width: 768px) {
        .hero-compact {
            padding: 1rem;
        }

        .upload-box {
            padding: 2rem 1rem;
        }

        .content-section {
            padding: 1.5rem 1rem;
        }

        .features-grid {
            grid-template-columns: 1fr;
            gap: 1rem;
        }

        .step-item {
            flex-direction: column;
        }

        .files-actions {
            flex-direction: column;
            width: 100%;
        }

        .btn-sm {
            width: 100%;
        }
    }
</style>

<div class="hero-compact">
    <h1>{% trans "Turn JPG Images into PDF Files" %}</h1>
    <p>{% trans "Free converter that works in your browser. No signup, no software to install." %}</p>
</div>

<div class="upload-section">
    <div class="upload-box" id="uploadBox">
        <input type="file" id="fileInput" class="file-input" accept="image/*" multiple>
        <div class="upload-icon-circle">
            <i class="fas fa-cloud-upload-alt"></i>
        </div>
        <h2 class="upload-title">{% trans "Drop your images here" %}</h2>
        <p class="upload-subtitle">{% trans "or click to browse files" %}</p>
        <button type="button" class="select-files-btn" onclick="document.getElementById('fileInput').click()">
            {% trans "Select Images" %}
        </button>
    </div>

    <div class="trust-bar">
        <i class="fas fa-shield-alt"></i>
        <span><strong>{% trans "Private" %}</strong> - {% trans "Files deleted after 24 hours" %}</span>
    </div>

    <div class="files-state" id="filesState">
        <div class="files-header">
            <div class="files-count" id="filesCount">0 {% trans "files" %}</div>
            <div class="files-actions">
                <button class="btn-sm btn-add" onclick="addMoreFiles()">
                    <i class="fas fa-plus"></i> {% trans "Add more" %}
                </button>
                <button class="btn-sm btn-clear" onclick="clearFiles()">
                    <i class="fas fa-trash-alt"></i> {% trans "Clear" %}
                </button>
            </div>
        </div>
        <div class="previews" id="previews"></div>
        <div class="files-footer">
            <button class="convert-btn" id="convertBtn" onclick="convertFiles()">
                <i class="fas fa-file-pdf"></i> {% trans "Convert to PDF" %}
            </button>
        </div>
    </div>
</div>

<div class="content-section">
    <h2>{% trans "Why I Built This" %}</h2>
    <p>{% trans "I got tired of downloading random software just to convert a couple photos to PDF. You know the routine - you need to submit something for work or school, and suddenly you're installing programs that want permissions for everything on your computer." %}</p>
    
    <p>{% trans "This tool does one thing: takes your images and puts them in a PDF. No account signup, no email collection, no upsells for premium features. I make enough from a few ads to keep the servers running." %}</p>

    <h3>{% trans "It's Actually Fast" %}</h3>
    <p>{% trans "Most converters are slow because they're handling hundreds of people on cheap servers. I've waited 10 minutes before for a simple conversion - that's ridiculous. This usually takes under 5 seconds. If it's slower, something's probably wrong." %}</p>

    <h3>{% trans "Your Images Won't Look Worse" %}</h3>
    <p>{% trans "Some sites compress your images to save money on storage. You upload a clear photo and get back a blurry mess. I don't do that. Your image goes in, gets wrapped in PDF format, comes out looking identical." %}</p>
</div>

<div class="content-section" id="features">
    <h2>{% trans "What You're Getting" %}</h2>
    <div class="features-grid">
        <div class="feature-item">
            <div class="feature-icon">
                <i class="fas fa-lock"></i>
            </div>
            <h3>{% trans "Private" %}</h3>
            <p>{% trans "Files upload through encryption and get deleted after 24 hours. I can't see what you're converting." %}</p>
        </div>
        <div class="feature-item">
            <div class="feature-icon">
                <i class="fas fa-infinity"></i>
            </div>
            <h3>{% trans "No Limits" %}</h3>
            <p>{% trans "Convert 5 files or 500. There's no daily cap or paywall." %}</p>
        </div>
        <div class="feature-item">
            <div class="feature-icon">
                <i class="fas fa-mobile-alt"></i>
            </div>
            <h3>{% trans "Works Anywhere" %}</h3>
            <p>{% trans "Phone, tablet, computer - doesn't matter. It's just a website." %}</p>
        </div>
        <div class="feature-item">
            <div class="feature-icon">
                <i class="fas fa-tachometer-alt"></i>
            </div>
            <h3>{% trans "Quick" %}</h3>
            <p>{% trans "Usually done in under 5 seconds. The servers are optimized for speed." %}</p>
        </div>
        <div class="feature-item">
            <div class="feature-icon">
                <i class="fas fa-file-image"></i>
            </div>
            <h3>{% trans "Different Formats" %}</h3>
            <p>{% trans "JPG, PNG, GIF, BMP, WebP - they all work." %}</p>
        </div>
        <div class="feature-item">
            <div class="feature-icon">
                <i class="fas fa-users"></i>
            </div>
            <h3>{% trans "No Signup" %}</h3>
            <p>{% trans "Just use it. No account, no email, no password." %}</p>
        </div>
    </div>
</div>

<div class="content-section">
    <h2>{% trans "How to Use This" %}</h2>
    <div class="steps-list">
        <div class="step-item">
            <div class="step-number">1</div>
            <div class="step-content">
                <h3>{% trans "Pick Your Images" %}</h3>
                <p>{% trans "Click the upload box or drag files from your desktop. You can select multiple at once - hold Ctrl (Windows) or Command (Mac) while clicking. Works with JPG, PNG, GIF, BMP, and WebP. Max 2GB per file." %}</p>
            </div>
        </div>
        <div class="step-item">
            <div class="step-number">2</div>
            <div class="step-content">
                <h3>{% trans "Check Your Files" %}</h3>
                <p>{% trans "You'll see thumbnails of everything you uploaded. They'll appear in your PDF in this same order. Remove any mistakes by clicking the X, or add more files if you forgot something." %}</p>
            </div>
        </div>
        <div class="step-item">
            <div class="step-number">3</div>
            <div class="step-content">
                <h3>{% trans "Download the PDF" %}</h3>
                <p>{% trans "Hit convert and wait a couple seconds. You'll go to a download page where you can grab your PDF. The file stays available for 24 hours if you need it again." %}</p>
            </div>
        </div>
    </div>
</div>

<div class="content-section" id="faq">
    <h2>{% trans "Common Questions" %}</h2>
    <div class="faq-section">
        <div class="faq-item">
            <button class="faq-question" onclick="toggleFaq(this)">
                {% trans "How long does the JPG to PDF conversion process actually take?" %}
            </button>
            <div class="faq-answer">
                {% trans "Usually 2-5 seconds per image. Ten photos takes about 20-30 seconds total. Huge files or slow internet might add some time, but it's rare for anything to take over a minute." %}
            </div>
        </div>
        <div class="faq-item">
            <button class="faq-question" onclick="toggleFaq(this)">
                {% trans "Is there a limit on how many files I can convert per day or month?" %}
            </button>
            <div class="faq-answer">
                {% trans "Nope. Use it as much as you want. I've seen people convert thousands of files over several months. No daily caps, no monthly quotas, no paid upgrades." %}
            </div>
        </div>
        <div class="faq-item">
    <button class="faq-question" onclick="toggleFaq(this)">
        {% trans "Can I convert multiple JPG images into a single PDF file?" %}
    </button>
    <div class="faq-answer">
        {% trans "Yes! You can select multiple JPG images at once, and they will all be combined into a single PDF document. The images will appear in the order you selected them. This is perfect for creating multi-page documents from scanned images or photo collections." %}
    </div>
</div>

<div class="faq-item">
    <button class="faq-question" onclick="toggleFaq(this)">
        {% trans "Do I need to install any software to use this JPG to PDF converter?" %}
    </button>
    <div class="faq-answer">
        {% trans "No installation needed! This is a web-based tool that works directly in your browser. It's compatible with Chrome, Firefox, Safari, Edge, and all modern browsers on Windows, Mac, Linux, Android, and iOS. Just visit the website and start converting." %}
    </div>
</div>
        <div class="faq-item">
            <button class="faq-question" onclick="toggleFaq(this)">
                {% trans "What happens to my files after I upload them to your server?" %}
            </button>
            <div class="faq-answer">
                {% trans "You upload through encryption, I convert them to PDF, you download it. The files sit on my server for 24 hours in case you need them again, then they're automatically deleted. No backups, no archives." %}
            </div>
        </div>
    </div>
</div>

<script>
(function() {
    'use strict';
    
    let selectedFiles = [];
    let isConverting = false;

    const elements = {
        uploadBox: document.getElementById('uploadBox'),
        fileInput: document.getElementById('fileInput'),
        filesState: document.getElementById('filesState'),
        filesCount: document.getElementById('filesCount'),
        previews: document.getElementById('previews'),
        convertBtn: document.getElementById('convertBtn')
    };

    document.addEventListener('DOMContentLoaded', init);

    function init() {
        setupDragDrop();
        setupFileInput();
    }

    function setupDragDrop() {
        const uploadBox = elements.uploadBox;
        if (!uploadBox) return;

        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
            uploadBox.addEventListener(eventName, preventDefaults, false);
        });

        uploadBox.addEventListener('dragover', function() {
            this.classList.add('dragover');
        });

        uploadBox.addEventListener('dragleave', function() {
            this.classList.remove('dragover');
        });

        uploadBox.addEventListener('drop', function(e) {
            this.classList.remove('dragover');
            const files = Array.from(e.dataTransfer.files);
            handleFiles(files);
        });
    }

    function setupFileInput() {
        if (!elements.fileInput) return;
        elements.fileInput.addEventListener('change', function(e) {
            const files = Array.from(e.target.files);
            handleFiles(files);
        });
    }

    function preventDefaults(e) {
        e.preventDefault();
        e.stopPropagation();
    }

    function handleFiles(files) {
        const validFiles = files.filter(file => {
            const validTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/gif', 'image/bmp', 'image/webp'];
            const maxSize = 2 * 1024 * 1024 * 1024;
            
            if (!validTypes.includes(file.type)) {
                return false;
            }
            
            if (file.size > maxSize) {
                return false;
            }
            
            return true;
        });

        if (validFiles.length > 0) {
            selectedFiles.push(...validFiles);
            updateDisplay();
            showFilesState();
        }

        if (elements.fileInput) {
            elements.fileInput.value = '';
        }
    }

    function updateDisplay() {
        updateFilesCount();
        updatePreviews();
        updateConvertButton();
    }

    function updateFilesCount() {
        if (elements.filesCount) {
            const count = selectedFiles.length;
            elements.filesCount.textContent = count + ' {% trans "files" %}';
        }
    }

    function updatePreviews() {
        if (!elements.previews) return;
        elements.previews.innerHTML = '';

        selectedFiles.forEach((file, index) => {
            const preview = document.createElement('div');
            preview.className = 'preview';

            const img = document.createElement('img');
            img.alt = file.name;

            const removeBtn = document.createElement('button');
            removeBtn.className = 'remove-btn';
            removeBtn.innerHTML = '<i class="fas fa-times"></i>';
            removeBtn.onclick = function(e) {
                e.stopPropagation();
                removeFile(index);
            };

            const reader = new FileReader();
            reader.onload = function(e) {
                img.src = e.target.result;
            };
            reader.readAsDataURL(file);

            preview.appendChild(img);
            preview.appendChild(removeBtn);
            elements.previews.appendChild(preview);
        });
    }

    function updateConvertButton() {
        if (elements.convertBtn) {
            elements.convertBtn.disabled = selectedFiles.length === 0 || isConverting;
        }
    }

    function removeFile(index) {
        selectedFiles.splice(index, 1);
        if (selectedFiles.length === 0) {
            hideFilesState();
        } else {
            updateDisplay();
        }
    }

    function showFilesState() {
        if (elements.uploadBox) elements.uploadBox.style.display = 'none';
        if (elements.filesState) elements.filesState.classList.add('show');
    }

    function hideFilesState() {
        if (elements.filesState) elements.filesState.classList.remove('show');
        if (elements.uploadBox) elements.uploadBox.style.display = 'block';
    }

    function getCookie(name) {
        let cookieValue = null;
        if (document.cookie && document.cookie !== '') {
            const cookies = document.cookie.split(';');
            for (let i = 0; i < cookies.length; i++) {
                const cookie = cookies[i].trim();
                if (cookie.substring(0, name.length + 1) === (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }

    window.addMoreFiles = function() {
        if (elements.fileInput) elements.fileInput.click();
    };

    window.clearFiles = function() {
        selectedFiles = [];
        hideFilesState();
        updateDisplay();
    };

    window.convertFiles = async function() {
        if (selectedFiles.length === 0 || isConverting) return;

        isConverting = true;
        updateConvertButton();

        if (elements.convertBtn) {
            elements.convertBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> {% trans "Converting..." %}';
        }

        try {
            const results = [];

            for (let i = 0; i < selectedFiles.length; i++) {
                const file = selectedFiles[i];
                const formData = new FormData();
                formData.append('file', file);
                formData.append('conversion_type', 'jpg_to_pdf');

                const response = await fetch('/upload/', {
                    method: 'POST',
                    body: formData,
                    headers: {
                        'X-CSRFToken': getCookie('csrftoken')
                    }
                });

                const result = await response.json();

                if (result.success) {
                    results.push(result);
                } else {
                    throw new Error(result.error || 'Conversion failed');
                }
            }

            const result = results[0];
            setTimeout(() => {
                window.location.href = result.redirect_url || `/download-page/${result.job_id}/`;
            }, 1000);

        } catch (error) {
            console.error('Conversion error:', error);
            isConverting = false;
            if (elements.convertBtn) {
                elements.convertBtn.// Complete the convertFiles function and add remaining functions

                innerHTML = '<i class="fas fa-file-pdf"></i> {% trans "Convert to PDF" %}';
            }
            updateConvertButton();
        }
    };

    window.toggleFaq = function(button) {
        const answer = button.nextElementSibling;
        const isActive = button.classList.contains('active');

        document.querySelectorAll('.faq-question').forEach(q => {
            q.classList.remove('active');
            q.nextElementSibling.classList.remove('active');
        });

        if (!isActive) {
            button.classList.add('active');
            answer.classList.add('active');
        }
    };

})();
<!-- Add this to close the script tag in home.html -->

</script>

{% endblock %}