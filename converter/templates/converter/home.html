{% extends 'base.html' %}

{% block title %}Free JPG to PDF Converter - Convert Images Online{% endblock %}
{% block meta_description %}Turn your JPG and PNG images into PDF files. Free tool, no signup needed. Works on phone and computer.{% endblock %}

{% block content %}
<style>
    :root {
        --primary-red: #ff4757;
        --primary-red-dark: #ee3744;
        --text-dark: #2c3e50;
        --text-gray: #7f8c8d;
        --bg-light: #fff5f5;
        --border-light: #ffe0e0;
        --white: #ffffff;
        --shadow: 0 2px 8px rgba(0,0,0,0.06);
        --shadow-lg: 0 4px 20px rgba(0,0,0,0.1);
    }

    .hero-compact {
        background: transparent;
        padding: 1rem;
        text-align: center;
        border-bottom: 1px solid #e9ecef;
    }

    .hero-compact h1 {
        font-size: clamp(1.3rem, 3.5vw, 1.75rem);
        font-weight: 700;
        color: var(--text-dark);
        margin-bottom: 0.25rem;
    }

    .hero-compact p {
        font-size: clamp(0.85rem, 1.8vw, 0.95rem);
        color: var(--text-gray);
        max-width: 600px;
        margin: 0 auto;
    }

    .upload-section {
        max-width: 700px;
        margin: 2rem auto;
        padding: 0 1rem;
    }

    .upload-box {
        background: white;
        border: 2px dashed var(--border-light);
        border-radius: 12px;
        padding: 2.5rem 1.5rem;
        text-align: center;
        cursor: pointer;
        transition: all 0.3s;
        position: relative;
    }

    .upload-box:hover {
        border-color: var(--primary-red);
        background: #fffafa;
        transform: translateY(-2px);
    }

    .upload-box.dragover {
        border-color: var(--primary-red);
        background: #fff5f5;
        transform: scale(1.02);
    }

    .upload-icon-circle {
        width: 60px;
        height: 60px;
        background: var(--bg-light);
        border-radius: 50%;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 1rem;
    }

    .upload-icon-circle i {
        font-size: 1.5rem;
        color: var(--primary-red);
    }

    .upload-title {
        font-size: 1.25rem;
        font-weight: 600;
        color: var(--text-dark);
        margin-bottom: 0.5rem;
    }

    .upload-subtitle {
        color: var(--text-gray);
        font-size: 0.9rem;
        margin-bottom: 1.25rem;
    }

    .select-files-btn {
        background: var(--primary-red);
        color: white;
        border: none;
        padding: 0.875rem 2rem;
        border-radius: 8px;
        font-weight: 600;
        font-size: 0.95rem;
        cursor: pointer;
        transition: all 0.3s;
    }

    .select-files-btn:hover {
        background: var(--primary-red-dark);
        transform: translateY(-1px);
        box-shadow: var(--shadow-lg);
    }

    .file-input {
        position: absolute;
        inset: 0;
        opacity: 0;
        cursor: pointer;
    }

    .trust-bar {
        background: #e8f5e9;
        border: 1px solid #c8e6c9;
        border-radius: 8px;
        padding: 1rem 1.25rem;
        margin-top: 1.5rem;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.75rem;
    }

    .trust-bar i {
        color: #4caf50;
        font-size: 1.25rem;
    }

    .trust-bar span {
        font-size: 0.9rem;
        color: #2e7d32;
    }

    .files-state {
        background: white;
        border-radius: 12px;
        box-shadow: var(--shadow);
        display: none;
        margin-top: 2rem;
    }

    .files-state.show {
        display: block;
    }

    .files-header {
        padding: 1rem 1.5rem;
        border-bottom: 1px solid #e9ecef;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .files-count {
        font-weight: 600;
        color: var(--text-dark);
        font-size: 0.95rem;
    }

    .files-actions {
        display: flex;
        gap: 0.5rem;
    }

    .btn-sm {
        padding: 0.5rem 1rem;
        border-radius: 6px;
        font-weight: 600;
        font-size: 0.85rem;
        cursor: pointer;
        transition: all 0.3s;
        border: none;
    }

    .btn-add {
        background: var(--primary-red);
        color: white;
    }

    .btn-clear {
        background: #e9ecef;
        color: var(--text-gray);
    }

    .previews {
        padding: 1rem 1.5rem;
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
        gap: 0.75rem;
        max-height: 300px;
        overflow-y: auto;
    }

    .preview {
        position: relative;
        aspect-ratio: 1;
        background: #fafbfc;
        border-radius: 8px;
        overflow: hidden;
        border: 1px solid #e9ecef;
    }

    .preview img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .remove-btn {
        position: absolute;
        top: 0.25rem;
        right: 0.25rem;
        background: rgba(255, 71, 87, 0.95);
        color: white;
        border: none;
        width: 24px;
        height: 24px;
        border-radius: 50%;
        cursor: pointer;
        font-size: 0.75rem;
        display: flex;
        align-items: center;
        justify-content: center;
        opacity: 0;
        transition: opacity 0.3s;
    }

    .preview:hover .remove-btn {
        opacity: 1;
    }

    .files-footer {
        padding: 1rem 1.5rem;
        border-top: 1px solid #e9ecef;
        text-align: center;
    }

    .convert-btn {
        background: var(--primary-red);
        color: white;
        border: none;
        padding: 0.875rem 2rem;
        border-radius: 6px;
        font-weight: 600;
        font-size: 0.95rem;
        cursor: pointer;
        transition: all 0.3s;
    }

    .convert-btn:hover {
        background: var(--primary-red-dark);
    }

    .convert-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
    }

    .content-section {
        background: white;
        border-radius: 12px;
        padding: 2rem clamp(1rem, 3vw, 2rem);
        margin: 2rem 0;
        box-shadow: var(--shadow);
    }

    .content-section h2 {
        font-size: clamp(1.5rem, 3vw, 1.875rem);
        margin-bottom: 1rem;
        color: var(--text-dark);
        font-weight: 700;
    }

    .content-section h3 {
        font-size: clamp(1.1rem, 2.5vw, 1.35rem);
        margin: 1.5rem 0 0.75rem;
        color: var(--text-dark);
        font-weight: 600;
    }

    .content-section p {
        color: var(--text-gray);
        margin-bottom: 1rem;
        line-height: 1.7;
        font-size: clamp(0.9rem, 2vw, 1rem);
    }

    .content-section ul {
        margin: 1rem 0;
        padding-left: 1.5rem;
    }

    .content-section li {
        color: var(--text-gray);
        margin-bottom: 0.75rem;
        line-height: 1.6;
    }

    .features-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 1.5rem;
        margin: 2rem 0;
    }

    .feature-item {
        text-align: center;
        padding: 1rem;
    }

    .feature-icon {
        width: 56px;
        height: 56px;
        background: var(--bg-light);
        border-radius: 12px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 1rem;
    }

    .feature-icon i {
        font-size: 1.5rem;
        color: var(--primary-red);
    }

    .feature-item h3 {
        font-size: 1rem;
        font-weight: 600;
        margin-bottom: 0.5rem;
        color: var(--text-dark);
    }

    .feature-item p {
        font-size: 0.85rem;
        color: var(--text-gray);
        line-height: 1.5;
    }

    .steps-list {
        margin: 2rem 0;
    }

    .step-item {
        display: flex;
        gap: 1rem;
        margin-bottom: 1.5rem;
        padding: 1rem;
        background: #fafbfc;
        border-radius: 8px;
    }

    .step-number {
        width: 32px;
        height: 32px;
        background: var(--primary-red);
        color: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 700;
        font-size: 0.9rem;
        flex-shrink: 0;
    }

    .step-content h3 {
        font-size: 1rem;
        font-weight: 600;
        color: var(--text-dark);
        margin: 0 0 0.25rem 0;
    }

    .step-content p {
        font-size: 0.9rem;
        color: var(--text-gray);
        margin: 0;
        line-height: 1.5;
    }

    .faq-section {
        margin: 2rem 0;
    }

    .faq-item {
        border-bottom: 1px solid #e9ecef;
        padding: 1.5rem 0;
    }

    .faq-item:last-child {
        border-bottom: none;
    }

    .faq-question {
        width: 100%;
        background: none;
        border: none;
        padding: 0;
        text-align: left;
        font-size: 1.15rem;
        font-weight: 700;
        color: var(--text-dark);
        cursor: pointer;
        display: flex;
        justify-content: space-between;
        align-items: center;
        transition: color 0.3s;
        line-height: 1.5;
    }

    .faq-question:hover {
        color: var(--primary-red);
    }

    .faq-question::after {
        content: '+';
        font-size: 1.8rem;
        color: var(--text-gray);
        transition: transform 0.3s;
        margin-left: 1rem;
    }

    .faq-question.active::after {
        transform: rotate(45deg);
    }

    .faq-answer {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s;
        color: var(--text-gray);
        font-size: 1rem;
        line-height: 1.7;
    }

    .faq-answer.active {
        max-height: 500px;
        padding-top: 1rem;
    }

    @media (max-width: 768px) {
        .hero-compact {
            padding: 1rem;
        }

        .upload-box {
            padding: 2rem 1rem;
        }

        .content-section {
            padding: 1.5rem 1rem;
        }

        .features-grid {
            grid-template-columns: 1fr;
            gap: 1rem;
        }

        .step-item {
            flex-direction: column;
        }

        .files-actions {
            flex-direction: column;
            width: 100%;
        }

        .btn-sm {
            width: 100%;
        }
    }
</style>

<div class="hero-compact">
    <h1>Turn JPG Images into PDF Files</h1>
    <p>Free converter that works in your browser. No signup, no software to install.</p>
</div>

<div class="upload-section">
    <div class="upload-box" id="uploadBox">
        <input type="file" id="fileInput" class="file-input" accept="image/*" multiple>
        <div class="upload-icon-circle">
            <i class="fas fa-cloud-upload-alt"></i>
        </div>
        <h2 class="upload-title">Drop your images here</h2>
        <p class="upload-subtitle">or click to browse files</p>
        <button type="button" class="select-files-btn" onclick="document.getElementById('fileInput').click()">
            Select Images
        </button>
    </div>

    <div class="trust-bar">
        <i class="fas fa-shield-alt"></i>
        <span><strong>Private</strong> - Files deleted after 24 hours</span>
    </div>

    <div class="files-state" id="filesState">
        <div class="files-header">
            <div class="files-count" id="filesCount">0 files</div>
            <div class="files-actions">
                <button class="btn-sm btn-add" onclick="addMoreFiles()">
                    <i class="fas fa-plus"></i> Add more
                </button>
                <button class="btn-sm btn-clear" onclick="clearFiles()">
                    <i class="fas fa-trash-alt"></i> Clear
                </button>
            </div>
        </div>
        <div class="previews" id="previews"></div>
        <div class="files-footer">
            <button class="convert-btn" id="convertBtn" onclick="convertFiles()">
                <i class="fas fa-file-pdf"></i> Convert to PDF
            </button>
        </div>
    </div>
</div>

<div class="content-section">
    <h2>Why I Built This</h2>
    <p>I got tired of downloading random software just to convert a couple photos to PDF. You know the routine - you need to submit something for work or school, and suddenly you're installing programs that want permissions for everything on your computer.</p>
    
    <p>This tool does one thing: takes your images and puts them in a PDF. No account signup, no email collection, no upsells for "premium features." I make enough from a few ads to keep the servers running.</p>

    <h3>It's Actually Fast</h3>
    <p>Most converters are slow because they're handling hundreds of people on cheap servers. I've waited 10 minutes before for a simple conversion - that's ridiculous. This usually takes under 5 seconds. If it's slower, something's probably wrong.</p>

    <h3>Your Images Won't Look Worse</h3>
    <p>Some sites compress your images to save money on storage. You upload a clear photo and get back a blurry mess. I don't do that. Your image goes in, gets wrapped in PDF format, comes out looking identical.</p>
</div>

<div class="content-section" id="features">
    <h2>What You're Getting</h2>
    <div class="features-grid">
        <div class="feature-item">
            <div class="feature-icon">
                <i class="fas fa-lock"></i>
            </div>
            <h3>Private</h3>
            <p>Files upload through encryption and get deleted after 24 hours. I can't see what you're converting.</p>
        </div>
        <div class="feature-item">
            <div class="feature-icon">
                <i class="fas fa-infinity"></i>
            </div>
            <h3>No Limits</h3>
            <p>Convert 5 files or 500. There's no daily cap or paywall.</p>
        </div>
        <div class="feature-item">
            <div class="feature-icon">
                <i class="fas fa-mobile-alt"></i>
            </div>
            <h3>Works Anywhere</h3>
            <p>Phone, tablet, computer - doesn't matter. It's just a website.</p>
        </div>
        <div class="feature-item">
            <div class="feature-icon">
                <i class="fas fa-tachometer-alt"></i>
            </div>
            <h3>Quick</h3>
            <p>Usually done in under 5 seconds. The servers are optimized for speed.</p>
        </div>
        <div class="feature-item">
            <div class="feature-icon">
                <i class="fas fa-file-image"></i>
            </div>
            <h3>Different Formats</h3>
            <p>JPG, PNG, GIF, BMP, WebP - they all work.</p>
        </div>
        <div class="feature-item">
            <div class="feature-icon">
                <i class="fas fa-users"></i>
            </div>
            <h3>No Signup</h3>
            <p>Just use it. No account, no email, no password.</p>
        </div>
    </div>
</div>

<div class="content-section">
    <h2>How to Use This</h2>
    <div class="steps-list">
        <div class="step-item">
            <div class="step-number">1</div>
            <div class="step-content">
                <h3>Pick Your Images</h3>
                <p>Click the upload box or drag files from your desktop. You can select multiple at once - hold Ctrl (Windows) or Command (Mac) while clicking. Works with JPG, PNG, GIF, BMP, and WebP. Max 2GB per file.</p>
            </div>
        </div>
        <div class="step-item">
            <div class="step-number">2</div>
            <div class="step-content">
                <h3>Check Your Files</h3>
                <p>You'll see thumbnails of everything you uploaded. They'll appear in your PDF in this same order. Remove any mistakes by clicking the X, or add more files if you forgot something.</p>
            </div>
        </div>
        <div class="step-item">
            <div class="step-number">3</div>
            <div class="step-content">
                <h3>Download the PDF</h3>
                <p>Hit convert and wait a couple seconds. You'll go to a download page where you can grab your PDF. The file stays available for 24 hours if you need it again.</p>
            </div>
        </div>
    </div>
</div>

<div class="content-section">
    <h2>When People Use This</h2>
    
    <h3>Job Applications</h3>
    <p>A lot of job sites want PDFs instead of image files. If you scanned your resume or certificates as JPGs, converting them makes the upload easier. Plus it looks more professional than submitting individual photos.</p>

    <h3>School Work</h3>
    <p>Students take pictures of handwritten homework or notes with their phones. Most teachers prefer PDFs because they're easier to grade digitally. Convert your photos before uploading and you're good to go.</p>

    <h3>Sharing Photos with Family</h3>
    <p>Email has attachment limits. Instead of sending 15 separate photos to your grandparents, convert them to one PDF. Easier for them to open and view too.</p>

    <h3>Real Estate</h3>
    <p>Agents take dozens of property photos. Converting them to PDF makes a clean package you can email to buyers or print for open houses.</p>

    <h3>Medical Stuff</h3>
    <p>If you photograph prescription bottles, bills, or insurance cards, putting them in a PDF makes them easier to send to your doctor or insurance company. A lot of medical portals specifically ask for PDFs.</p>
</div>

<div class="content-section">
    <h2>Tips for Better Results</h2>
    <ul>
        <li><strong>Use good quality photos:</strong> If you're planning to print the PDF, start with high-res images (300 DPI or better).</li>
        <li><strong>Watch file sizes:</strong> Each high-res photo might be 5-8 MB. Twenty photos = 100+ MB PDF, which won't email. Either use lower quality images or send via cloud storage.</li>
        <li><strong>Get the order right:</strong> Files go in the PDF in the order you select them. Name them with numbers if you need a specific order (01-first.jpg, 02-second.jpg, etc.).</li>
        <li><strong>Rotate before uploading:</strong> Some phone photos come out sideways. Fix the rotation before converting - it's easier than trying to fix it in the PDF.</li>
        <li><strong>Crop scanned docs:</strong> Scans often include your desk or shadows around the edges. Crop those out first for a cleaner look.</li>
        <li><strong>Keep sizes similar:</strong> Mixing a phone photo with a scanned poster looks weird. Try to use images with similar dimensions.</li>
    </ul>
</div>

<div class="content-section" id="faq">
    <h2>Common Questions</h2>
    <div class="faq-section">
        <div class="faq-item">
            <button class="faq-question" onclick="toggleFaq(this)">
                How long does the JPG to PDF conversion process actually take?
            </button>
            <div class="faq-answer">
                Usually 2-5 seconds per image. Ten photos takes about 20-30 seconds total. Huge files or slow internet might add some time, but it's rare for anything to take over a minute.
            </div>
        </div>
        <div class="faq-item">
            <button class="faq-question" onclick="toggleFaq(this)">
                Is there a limit on how many files I can convert per day or month?
            </button>
            <div class="faq-answer">
                Nope. Use it as much as you want. I've seen people convert thousands of files over several months. No daily caps, no monthly quotas, no paid upgrades.
            </div>
        </div>
        <div class="faq-item">
            <button class="faq-question" onclick="toggleFaq(this)">
                What happens to my files after I upload them to your server?
            </button>
            <div class="faq-answer">
                You upload through encryption, I convert them to PDF, you download it. The files sit on my server for 24 hours in case you need them again, then they're automatically deleted. No backups, no archives.
            </div>
        </div>
        <div class="faq-item">
            <button class="faq-question" onclick="toggleFaq(this)">
                Can I combine both portrait and landscape photos in the same PDF document?
            </button>
            <div class="faq-answer">
                Yeah. The converter figures out each image's orientation and creates the right page size. Whoever opens the PDF will need to rotate their screen for some pages, but that's normal.
            </div>
        </div>
        <div class="faq-item">
            <button class="faq-question" onclick="toggleFaq(this)">
                Will converting to PDF reduce my image quality or compress my photos?
            </button>
            <div class="faq-answer">
                No. Your image just gets wrapped in a PDF container. Same pixels, same quality. Think of it like putting a photo in a different picture frame - the photo itself doesn't change.
            </div>
        </div>
        <div class="faq-item">
            <button class="faq-question" onclick="toggleFaq(this)">
                Do I need to create an account or sign up with my email address?
            </button>
            <div class="faq-answer">
                No. I specifically built this to work without any signup. Just use it.
            </div>
        </div>
        <div class="faq-item">
            <button class="faq-question" onclick="toggleFaq(this)">
                What happens when I convert PNG files with transparent backgrounds to PDF?
            </button>
            <div class="faq-answer">
                PDFs don't support transparency like PNGs do. When you convert a transparent PNG, it gets placed on a white background in the PDF. This is how all PDF converters work - it's a format limitation.
            </div>
        </div>
        <div class="faq-item">
            <button class="faq-question" onclick="toggleFaq(this)">
                What's the maximum file size I can upload and convert to PDF?
            </button>
            <div class="faq-answer">
                Up to 2GB per image. That's way more than you need - most phone photos are 2-8 MB. Professional camera shots might be 20-50 MB. You're unlikely to hit the limit unless you're working with really unusual files.
            </div>
        </div>
    </div>
</div>

<script>
(function() {
    'use strict';
    
    const originalConsoleError = console.error;
    console.error = function(...args) {
        const message = args.join(' ').toLowerCase();
        if (message.includes('sw.js') || message.includes('site.webmanifest') || 
            message.includes('favicon') || message.includes('manifest.json')) {
            return;
        }
        originalConsoleError.apply(console, args);
    };
    
    window.addEventListener('error', function(e) {
        if (e.target && e.target.tagName) {
            const src = e.target.src || e.target.href || '';
            if (src.includes('favicon') || src.includes('apple-touch-icon') || 
                src.includes('site.webmanifest') || src.includes('sw.js')) {
                e.preventDefault();
                return false;
            }
        }
    }, true);

    let selectedFiles = [];
    let isConverting = false;

    const elements = {
        uploadBox: document.getElementById('uploadBox'),
        fileInput: document.getElementById('fileInput'),
        filesState: document.getElementById('filesState'),
        filesCount: document.getElementById('filesCount'),
        previews: document.getElementById('previews'),
        convertBtn: document.getElementById('convertBtn')
    };

    document.addEventListener('DOMContentLoaded', init);

    function init() {
        setupDragDrop();
        setupFileInput();
    }

    function setupDragDrop() {
        const uploadBox = elements.uploadBox;
        if (!uploadBox) return;

        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
            uploadBox.addEventListener(eventName, preventDefaults, false);
            document.addEventListener(eventName, preventDefaults, false);
        });

        uploadBox.addEventListener('dragover', function() {
            this.classList.add('dragover');
        });

        uploadBox.addEventListener('dragleave', function() {
            this.classList.remove('dragover');
        });

        uploadBox.addEventListener('drop', function(e) {
            this.classList.remove('dragover');
            const files = Array.from(e.dataTransfer.files);
            handleFiles(files);
        });
    }

    function setupFileInput() {
        if (!elements.fileInput) return;
        elements.fileInput.addEventListener('change', function(e) {
            const files = Array.from(e.target.files);
            handleFiles(files);
        });
    }

    function preventDefaults(e) {
        e.preventDefault();
        e.stopPropagation();
    }

    function handleFiles(files) {
        const validFiles = files.filter(file => {
            const validTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/gif', 'image/bmp', 'image/webp'];
            const maxSize = 2 * 1024 * 1024 * 1024;
            
            if (!validTypes.includes(file.type)) {
                showNotification('Please select image files only', 'error');
                return false;
            }
            
            if (file.size > maxSize) {
                showNotification(`${file.name} is too large (max 2GB)`, 'error');
                return false;
            }
            
            return true;
        });

        if (validFiles.length > 0) {
            selectedFiles.push(...validFiles);
            updateDisplay();
            showFilesState();
        }

        if (elements.fileInput) {
            elements.fileInput.value = '';
        }
    }

    function updateDisplay() {
        updateFilesCount();
        updatePreviews();
        updateConvertButton();
    }

    function updateFilesCount() {
        if (elements.filesCount) {
            const count = selectedFiles.length;
            elements.filesCount.textContent = `${count} file${count !== 1 ? 's' : ''}`;
        }
    }

    function updatePreviews() {
        if (!elements.previews) return;

        elements.previews.innerHTML = '';

        selectedFiles.forEach((file, index) => {
            const preview = document.createElement('div');
            preview.className = 'preview';

            const img = document.createElement('img');
            img.alt = file.name;

            const removeBtn = document.createElement('button');
            removeBtn.className = 'remove-btn';
            removeBtn.innerHTML = '<i class="fas fa-times"></i>';
            removeBtn.onclick = function(e) {
                e.stopPropagation();
                removeFile(index);
            };

            const reader = new FileReader();
            reader.onload = function(e) {
                img.src = e.target.result;
            };
            reader.readAsDataURL(file);

            preview.appendChild(img);
            preview.appendChild(removeBtn);
            elements.previews.appendChild(preview);
        });
    }

    function updateConvertButton() {
        if (elements.convertBtn) {
            elements.convertBtn.disabled = selectedFiles.length === 0 || isConverting;
        }
    }

    function removeFile(index) {
        selectedFiles.splice(index, 1);

        if (selectedFiles.length === 0) {
            hideFilesState();
        } else {
            updateDisplay();
        }
    }

    function showFilesState() {
        if (elements.uploadBox) {
            elements.uploadBox.style.display = 'none';
        }
        if (elements.filesState) {
            elements.filesState.classList.add('show');
        }
    }

    function hideFilesState() {
        if (elements.filesState) {
            elements.filesState.classList.remove('show');
        }
        if (elements.uploadBox) {
            elements.uploadBox.style.display = 'block';
        }
    }

    function getCookie(name) {
        let cookieValue = null;
        if (document.cookie && document.cookie !== '') {
            const cookies = document.cookie.split(';');
            for (let i = 0; i < cookies.length; i++) {
                const cookie = cookies[i].trim();
                if (cookie.substring(0, name.length + 1) === (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }

    function showNotification(message, type) {
        const notification = document.createElement('div');
        notification.style.cssText = `
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            color: white;
            font-weight: 600;
            z-index: 10000;
            animation: slideIn 0.3s ease-out;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            max-width: 90%;
        `;

        if (type === 'error') {
            notification.style.background = '#ff4757';
        } else if (type === 'success') {
            notification.style.background = '#4caf50';
        } else {
            notification.style.background = '#2196f3';
        }

        notification.textContent = message;
        document.body.appendChild(notification);

        setTimeout(() => {
            notification.remove();
        }, 4000);
    }

    window.addMoreFiles = function() {
        if (elements.fileInput) {
            elements.fileInput.click();
        }
    };

    window.clearFiles = function() {
        selectedFiles = [];
        hideFilesState();
        updateDisplay();
    };

    window.convertFiles = async function() {
        if (selectedFiles.length === 0 || isConverting) return;

        isConverting = true;
        updateConvertButton();

        if (elements.convertBtn) {
            elements.convertBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Converting...';
        }

        try {
            const results = [];

            for (let i = 0; i < selectedFiles.length; i++) {
                const file = selectedFiles[i];
                const formData = new FormData();
                formData.append('file', file);
                formData.append('conversion_type', 'jpg_to_pdf');

                const response = await fetch('/upload/', {
                    method: 'POST',
                    body: formData,
                    headers: {
                        'X-CSRFToken': getCookie('csrftoken')
                    }
                });

                const result = await response.json();

                if (result.success) {
                    results.push(result);
                } else {
                    throw new Error(result.error || `Failed to convert ${file.name}`);
                }
            }

            showNotification('Done! Redirecting...', 'success');

            const result = results[0];
            setTimeout(() => {
                window.location.href = result.redirect_url || `/download-page/${result.job_id}/`;
            }, 1000);

        } catch (error) {
            showNotification('Conversion failed: ' + error.message, 'error');
            console.error('Conversion error:', error);
            
            isConverting = false;
            if (elements.convertBtn) {
                elements.convertBtn.innerHTML = '<i class="fas fa-file-pdf"></i> Convert to PDF';
            }
            updateConvertButton();
        }
    };

    window.toggleFaq = function(button) {
        const answer = button.nextElementSibling;
        const isActive = button.classList.contains('active');

        document.querySelectorAll('.faq-question').forEach(q => {
            q.classList.remove('active');
            q.nextElementSibling.classList.remove('active');
        });

        if (!isActive) {
            button.classList.add('active');
            answer.classList.add('active');
        }
    };

    const style = document.createElement('style');
    style.textContent = `
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(100px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
    `;
    document.head.appendChild(style);

})();
</script>

{% endblock %}